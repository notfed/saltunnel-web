<!DOCTYPE html>
<html>

<head>
  <title>saltunnel</title>
  <link rel="stylesheet" href="main.css" />
</head>

<body style="background-color:white;color:black">

  <div id="main-container">

    <div id="main-header-container">
      <h1>saltunnel</h1>
      <h2>A cryptographically secure TCP tunnel</h2>

      <ul class="main-menu">
        <li class="menu-current ui-corner-all">Introduction</li>
        <li><a class="ui-corner-all" href="/quick-start.html">Quick Start</a></li>
        <li><a class="ui-corner-all" href="/documentation.html">Documentation</a></li>
      </ul>

    </div>
<style>
 
.code-block {
    display:block;
    border-radius:0.5em;
    border:4px solid green;
}

</style>
    <div id="main-content-container">


      <style type="text/css">
        ol.letter-list {
          list-style-type: lower-alpha;
        }
      </style>

    <h2>What is saltunnel?</h2>

    <p>
      <code>saltunnel</code> is a secure transport-layer protocol&mdash;as well as a set of tools which establish a TCP tunnel using the protocol. Unlike SSH or TLS, it relies on symmetric-key cryptography to authenticate peers. As a consequence, it has the advantage (over SSH and TLS) of being secure against quantum computers, as well as having the property that all data (apart from TCP/IP headers and timing information) is indistinguishable from uniform random data. It's also pretty easy to install and use.
    </p>

      <p>
      To illustrate the "indistinguishable-from-random" property, here's an example of a connection-initiating "client hello" sent by the client in a TLS connection:
    </p>

      <div style="text-align:center">
<pre class="hexdump">
c46e1f5b0ef7a483e71666d208004500   .n.[......f...E.
011b0000400040064ee7c0a801edb9c7   ....@.@.N.......
6e99f58201bba7d90f840ff3cfb18018   n...............
080a07df00000101080a11e25ad229bd   ............Z.).
ea7f16030100e2010000de0303b58f0a   ................
d125c1cf34360d948026e9e76b8e6ac8   .%..46...&..k.j.
3cd761d8c577db6395a078fe2000005c   <.a..w.c..x. ..\
c030c02cc028c024c014c00a009f006b   .0.,.(.$.......k
0039cca9cca8ccaaff8500c400880081   .9..............
009d003d003500c00084c02fc02bc027   ...=.5...../.+.'
c023c013c009009e0067003300be0045   .#.......g.3...E
009c003c002f00ba0041c011c0070005   ...<./...A......
0004c012c0080016000a00ff01000059   ...............Y
00000011000f00000c6964656e746974   .........salttun
792e707562000b00020100000a000800   nel.io..........
06001d00170018000d001c001a060106   ................
03efef0501050304010403eeeeeded03   ................
010303020102030010000e000c026832   ..............h2
08687474702f312e31                 .http/1.1       
</pre>
      </div>

      <p>
        And, here's the equivalent from an SSH connection:
      </p>
  
        <div style="text-align:center">
<pre class="hexdump">
c46e1f5b0ef7a483e71666d208004500   .n.[......f...E.
00490000400040066951c0a801ed2248   .I..@.@.iQ...."H
ec80faab0016cb516b515e27dae38018   .......QkQ^'....
08142e8000000101080a11fde64e26b8   .............N&.
23915353482d322e302d4f70656e5353   #.SSH-2.0-OpenSS
485f382e310d0a                     H_8.1..         
</pre>
        </div>


      <p>
        Finally, compare the above to saltunnel, which always appears completely random to an eavesdropper:
      </p>

      <div style="text-align:center">
<pre class="hexdump">
5428898ff0f38e9d4437e36c3fbed0bc  |T(......D7.l?...|
8a56fbe09c2ffd50fc25f420b6edc43e  |.V.../.P.%. ...>|
f67d40635168013bafb9598f5a34e6c1  |.}@cQh.;..Y.Z4..|
2dd819b451fd16a36fdbc05ae3d4ee7c  |-...Q...o..Z...||
a4df25e96903f99cc1034da21a2519b0  |..%.i.....M..%..|
145459c13551336ac3156057b2581d3d  |.TY.5Q3j...W.X.=|
ef9296c4f7dd9c0bf6cc6690b0096420  |..........f...d |
acfdd8ecafb0b30907e2b42b033a801a  |...........+.:..|
71fa31990ac9c14d446f542d3c83dd74  |q.1....MDoT-<..t|
7c6dc1b956a78d497ec99111a5e58ad1  ||m..V..I~.......|
543e6699d4ae77f6675d3fc3a2fd871e  |T>f...w.g]?.....|
3d0491231c2d187142c99772983abac4  |=..#.-.qB..r.:..|
33c83c9ff5b976b857e6332279bc5653  |3.<...v.W.3"y.VS|
4762b74abbd7a055d6ed143a3d51446f  |Gb.J...U...:=QDo|
16db104718780165044c43481fcb2ba7  |...G.x.e.LCH..+.|
f478a04ad9709389d7854847f74f650a  |.x.J.p....HG.Oe.|
85aa99e3da85c77c0f89dbccfc1d0fd0  |.......|........|
7462e3319b94f0bf6436fa67f7ef825e  |tb.1....d6.g...^|
3db8ae78b1f75d61dd466adcc3ddafda  |=..x..]a.Fj.....|
dac554df4443c45ec934fda6576ef8c7  |..T.DC.^.4..Wn..|
17cd9d426cf496d909b856b42778ab70  |...Bl.....V.'x.p|
6efd4d4e02e0b3ff4c76bf294e0c2009  |n.MN....Lv.)N. .|
d99be35b1d75b87094685d7b84c71215  |...[.u.p.h]{....|
b2b2edd300c0f25567a671fd01996c31  |.......Ug.q...l1|
522b67a08c3ce316a2011334e9daf3b7  |R+g..<.....4....|
656fd409ba103461014cf47226e87c48  |eo....4a.L.r&.|H|
718ace2294d081fcbc7df1177358b1e9  |q..".....}..sX..|
c0848e2f04c9b848f689f10dceb11b73  |.../...H.......s|
90fba8df163148d07208c2e108a9c51a  |.....1H.r.......|
2506238114b5c293bf8ebf246f6ab1d2  |%.#........$oj..|
d669f7f48ba09590e49472440196c1ab  |.i........rD....|
deab098fa0fc74c0f43a8501d16a1101  |......t..:...j..|
</pre>
      </div>

      <p>
        Here's a detailed summary of <b>saltunnel</b>'s security features:
      </p>

      <dl class="bulleted-definition-list">

        <dt>Denial-of-Service Protection</dt>
        <dd>
          <b>saltunnel</b> servers have denial-of-service protection; about as much as is possible for a TCP server. An attacker attempting to overload a <B>saltunnel</B> server instance will find that the most cost-effective attacks are (probably) reduced to exploiting the well-known shortcomings of TCP itself.
        </dd>
        
        <dt>Forward Secrecy</dt>
        <dd>
          Forward secrecy ensures that it is impossible to retroactively decrypt data from a past connection, even if, at some point in the future, the long-term shared symmetric key is compromised. Despite using a symmetric-key protocol for its initiating handshake, <b>saltunnel</b> performs a Diffie-Hellman exchange to obtain an ephemeral session key, which is then used for the remainder of the TCP connection. When a connection terminates, the ephemeral keys which were used to encrypt that connection are permanently erased. 
        </dd>
        
        <dt>Key/Data Safety</dt>
        <dd>
          <b>saltunnel</b> makes a point to always use <B>mlock</B> to pin all keys and plaintext to memory, so that they are never swapped to disk. Additionally, as soon as each connection is closed, that connection's keys and plaintext are immediately erased from memory (except when the program is terminated via interrupt, unfortunately). This (usually) provides forward secrecy even in the face of disk forensics (assuming your <B>RLIMIT_MEMLOCK</B> is not too low) or cold-boot attacks (assuming you don't terminate the program or enter sleep mode while a connection is active).
        </dd>
        
        <dt>Message-Length Quantization</dt>
        <dd>
          Data is sent over the network in chunks of 512 bytes. If one computer sends, for example, 7 bytes, it will arrive as a 512-byte chunk on the other computer. This greatly reduces the amount of information which can be inferred from network analysis.
        </dd>
        
        <dt>Post-Quantum Security</dt>
        <dd>
          The protocol is also immune to quantum computing attacks, because its security relies on 256-bit symmetric-key cryptography. (Of which, the best attack known to be possible by quantum computers is Grover's algorithm, which reduces the security level to 128 bits.) 
          The catch, of course, is that as a prerequisite to using <b>saltunnel</b>, the key must be (somehow) shared securely between parties&mdash;a process which is famously difficult to do in a post-quantum-secure way.
        </dd>
        
        <dt>Steganography</dt>
        <dd>
          The protocol is steganographic-by-randomness, in that the entire protocol is indistinguishable from random: if someone attempts to eavesdrop on the conversation, they will be unable to detect any (for example) protocol header magic bytes or patterns in the data (apart from traffic analysis).
        </dd>

      </dl>
        
      <p>There are a few downsides to <b>saltunnel</b>:
        <ul>
          <li>As has already been stated, both the client and server must be pre-configured with a single 32-byte (256-bit) shared key&mdash;distributing this key in a secure manner is left up to the user. </li>
          <li>It can not act as an "open proxy". When a saltunnel client or server is running, it listens on a single <i>ip:port</i>, and forwards connections to a single <i>ip:port</i>.</li>
          <li>It a per-connection tunnel, and does not multiplex TCP connections. This means, while all payload data is encrypted/authenticated, a network eavesdropper can easily determine when new TCP connections start and finish.</li>
        </p>

    </div>

    <div id="main-footer">
      <div><code>Last Modified: 2020-07-10</code></div>
      <div><code>Jay Sullivan</code></div>
    </div>

  </div>

</body>

</html>
