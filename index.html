<!DOCTYPE html>
<html>

<head>
  <title>saltunnel</title>
  <link rel="stylesheet" href="main.css" />
</head>

<body style="background-color:white;color:black">

  <div id="main-container">

    <div id="main-header-container">
      <h1>saltunnel</h1>
      <h2>A cryptographically secure TCP tunnel</h2>

      <ul class="main-menu">
        <li class="menu-current ui-corner-all">Introduction</li>
        <li><a class="ui-corner-all" href="/quick-start.html">Quick Start</a></li>
        <li><a class="ui-corner-all" href="/documentation.html">Documentation</a></li>
      </ul>

    </div>
<style>
 
.code-block {
    display:block;
    border-radius:0.5em;
    border:4px solid green;
}

</style>
    <div id="main-content-container">


      <style type="text/css">
        ol.letter-list {
          list-style-type: lower-alpha;
        }
      </style>

    <h2>What is saltunnel?</h2>

    <p>
      <code>saltunnel</code> is a secure transport-layer protocol&mdash;as well as a set of tools for establishing TCP tunnels using the protocol. Unlike SSH or TLS, it relies on symmetric-key cryptography to authenticate peers. As a consequence, it has the advantage (over SSH and TLS) of being secure against quantum computers, as well as having the property that all data (apart from TCP/IP headers and timing information) is indistinguishable from uniform random data. It's also pretty easy to install and use.
    </p>

      <p>
      To illustrate the "indistinguishable-from-random" property, here's an example of a "client hello" handshake message sent by the client in a TLS connection:
    </p>

      <div style="text-align:center">
<pre class="hexdump">
c46e1f5b0ef7a483e71666d208004500   .n.[......f...E.
011b0000400040064ee7c0a801edb9c7   ....@.@.N.......
6e99f58201bba7d90f840ff3cfb18018   n...............
080a07df00000101080a11e25ad229bd   ............Z.).
ea7f16030100e2010000de0303b58f0a   ................
d125c1cf34360d948026e9e76b8e6ac8   .%..46...&..k.j.
3cd761d8c577db6395a078fe2000005c   <.a..w.c..x. ..\
c030c02cc028c024c014c00a009f006b   .0.,.(.$.......k
0039cca9cca8ccaaff8500c400880081   .9..............
009d003d003500c00084c02fc02bc027   ...=.5...../.+.'
c023c013c009009e0067003300be0045   .#.......g.3...E
009c003c002f00ba0041c011c0070005   ...<./...A......
0004c012c0080016000a00ff01000059   ...............Y
00000011000f00000c6964656e746974   .........salttun
792e707562000b00020100000a000800   nel.io..........
06001d00170018000d001c001a060106   ................
03efef0501050304010403eeeeeded03   ................
010303020102030010000e000c026832   ..............h2
08687474702f312e31                 .http/1.1       
</pre>
      </div>

      <p>
        And here's the equivalent from an SSH connection:
      </p>
  
        <div style="text-align:center">
<pre class="hexdump">
c46e1f5b0ef7a483e71666d208004500   .n.[......f...E.
00490000400040066951c0a801ed2248   .I..@.@.iQ...."H
ec80faab0016cb516b515e27dae38018   .......QkQ^'....
08142e8000000101080a11fde64e26b8   .............N&.
23915353482d322e302d4f70656e5353   #.SSH-2.0-OpenSS
485f382e310d0a                     H_8.1..         
</pre>
        </div>


      <p>
        Finally, compare the above to saltunnel, for which all data (including the handshake) appears completely random to an eavesdropper:
      </p>

      <div style="text-align:center">
<pre class="hexdump">
21e083638806bcc017c75975da647ac9  |!..c......Yu.dz.|
f8e055dc960f941790b1c6ef1486bfb1  |..U.............|
77133cb2a45964f1be7443067bdf31d6  |w.<..Yd..tC.{.1.|
6cc9c0aef936b0a79fc31727611d3192  |l....6.....'a.1.|
3f3e043be992ebdc9d198886655faeff  |?>.;........e_..|
3d47b78b33a0d8949559e3c20525fa8f  |=G..3....Y...%..|
a8f7d74945f1a4b7e7dcea68734f3be6  |...IE......hsO;.|
61815e79c9b0c96ccefa35e28773cd0b  |a.^y...l..5..s..|
19bddf1f792b7a5c588306cbabad997b  |....y+z\X......{|
66973ba2be2d2ae823c2b335a13f87e7  |f.;..-*.#..5.?..|
99307e7336db07d32030f4bbd1449e63  |.0~s6... 0...D.c|
3c09e05a034f8fa4281ff7eaf7b91728  |<..Z.O..(......(|
2ecc0ca6957a9903795fe37b694e8b24  |.....z..y_.{iN.$|
78770095397dea33e641873ca9cced3b  |xw..9}.3.A.<...;|
495f44a2c950166221e3f9926e417905  |I_D..P.b!...nAy.|
7ee840b5ab04f988aa5e2a85a0e3f60d  |~.@......^*.....|
e182e6c8ee1c748baf19067c747fcc9c  |......t....|t...|
0a38531fc64cf06b2ff68cecafe8075d  |.8S..L.k/......]|
6f48c479a237eff8b040ee8312ecea9c  |oH.y.7...@......|
b7bbd0d78286537aecfee1ac6bd24485  |......Sz....k.D.|
05c0fe53bd73b9628f3b80e5dead47b9  |...S.s.b.;....G.|
d3e1951dd79ea6c940ca4d98e2f7bc87  |........@.M.....|
f8c6f18841763140fa31d8a6dc5cd1e5  |....Av1@.1...\..|
53171b9b54803882c19bd53b6833adc2  |S...T.8....;h3..|
138fcb94cbc98baa0af3dd662eabfe1c  |...........f....|
57c5d93b273605464e042d1075bfd637  |W..;'6.FN.-.u..7|
1ead015dc94d99b65f77e7eb6a2eb786  |...].M.._w..j...|
cd5dcedd4b86961535e46cb6a6618bbf  |.]..K...5.l..a..|
2234f63837d42a6d90e25fc11f835d8a  |"4.87.*m.._...].|
dfcec93fc1fa052427a4c78bf6a72008  |...?...$'..... .|
9fd8c030820b07659570620f0ad0f2e9  |...0...e.pb.....|
1110741fd6f7df137e32e3a868fcc7e4  |..t.....~2..h...|
</pre>
      </div>

      <p>
        Here's a detailed summary of <b>saltunnel</b>'s security features:
      </p>

      <dl class="bulleted-definition-list">

        <dt>Denial-of-Service Protection</dt>
        <dd>
          <b>saltunnel</b> servers have denial-of-service protection; about as much as is possible for a TCP server. An attacker attempting to overload a <B>saltunnel</B> server instance will find that the most cost-effective attacks are (probably) reduced to exploiting the well-known shortcomings of TCP itself.
        </dd>
        
        <dt>Forward Secrecy</dt>
        <dd>
          Forward secrecy ensures that it is impossible to retroactively decrypt data from a past connection, even if, at some point in the future, the long-term shared symmetric key is compromised. Despite using a symmetric-key protocol for its initiating handshake, <b>saltunnel</b> performs a Diffie-Hellman exchange to obtain an ephemeral session key, which is then used for the remainder of the TCP connection. When a connection terminates, the ephemeral keys which were used to encrypt that connection are permanently erased. 
        </dd>
        
        <dt>Key/Data Safety</dt>
        <dd>
          <b>saltunnel</b> makes a point to always use <B>mlock</B> to "pin" all keys and plaintext in memory, so that they are never swapped to disk. Additionally, as soon as each connection is closed, that connection's keys and plaintext are immediately erased from memory. This (usually) provides forward secrecy even in the face of disk forensics or cold-boot attacks (assuming your <B>RLIMIT_MEMLOCK</B> is not too low and assuming you don't enter hibernate mode while a connection is active).
        </dd>
        
        <dt>Message-Length Quantization</dt>
        <dd>
          Data is sent over the network in chunks of 512 bytes. If one computer sends, for example, 7 bytes, it will arrive as a 512-byte chunk on the other computer. This greatly reduces the amount of information which can be inferred from network analysis.
        </dd>
        
        <dt>Post-Quantum Security</dt>
        <dd>
          The protocol is also immune to quantum computing attacks, because its security relies on 256-bit symmetric-key cryptography. (Of which, the best attack known to be possible by quantum computers is Grover's algorithm, which reduces the security level to 128 bits.) 
          The catch, of course, is that as a prerequisite to using <b>saltunnel</b>, the key must be (somehow) shared securely between parties&mdash;a process which is famously difficult to do, especially in a post-quantum-secure way.
        </dd>
        
        <dt>Uniform Randomness</dt>
        <dd>
          An attacker who eavesdrops on a <b>saltunnel</b> connection will only see a TCP connection with same-sized chunks  of uniform random data. There are no protocol header magic bytes or patterns within any given chunk of data.  This complicates an attacker's ability to track/fingerprint users, and makes it difficult to write analysis tools that detect/censor the <b>saltunnel</b> protocol. (Though, patterns may still be available through timing analysis.)
        </dd>

      </dl>
        
      <p>There are a few downsides to <b>saltunnel</b>:
        <ul class="spaced-bulleted-list">
          <li>As has already been stated, both the client and server must both be pre-configured with the same 32-byte (256-bit) shared key&mdash;distributing this key in a secure manner is left up to the user. </li>
          <li>It can not act as an "open proxy". When a saltunnel client or server is running, it listens on a single <i>ip:port</i>, and forwards connections to a single <i>ip:port</i>.</li>
          <li>It is a per-connection tunnel, and does not multiplex TCP connections. This means, while all payload data is encrypted/authenticated, a network eavesdropper can easily determine when new TCP connections start and finish.</li>
        </p>

    </div>

    <div id="main-footer">
      <div><code>Last Modified: 2020-07-10</code></div>
      <div><code>Jay Sullivan</code></div>
    </div>

  </div>

</body>

</html>
